# Example values for deploying BinaryLane Cloud Controller Manager
# This is a YAML-formatted file.

# Number of replicas (typically 1 for cloud controller manager, unless high availability is needed)
replicaCount: 1

# Container image configuration
image:
  repository: ghcr.io/oscarhermoso/binarylane-cloud-controller-manager
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion.
  # tag: "v0.1.0"

# BinaryLane Cloud Controller Manager specific settings
cloudControllerManager:
  # Secret containing BinaryLane API token
  # Create first: kubectl create secret generic binarylane-api-token --from-literal=api-token="YOUR_TOKEN" -n kube-system
  secret:
    name: 'binarylane-api-token'
    key: 'api-token'

# Service account configuration
serviceAccount:
  create: true
  automount: true
  # annotations: {}
  # name: ""

# Pod annotations and labels
podAnnotations: {}
podLabels: {}

# Security contexts
podSecurityContext:
  runAsNonRoot: true
  runAsUser: 65532
  fsGroup: 65532
  seccompProfile:
    type: RuntimeDefault

securityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL
  readOnlyRootFilesystem: true

# Resource limits and requests
resources:
  limits:
    cpu: 200m
    memory: 128Mi
  requests:
    cpu: 100m
    memory: 64Mi

# Node selector - run on control plane nodes
nodeSelector:
  node-role.kubernetes.io/control-plane: ''

# Tolerations - allow scheduling on control plane nodes
tolerations:
  - effect: NoSchedule
    key: node-role.kubernetes.io/control-plane
    operator: Exists
  - effect: NoSchedule
    key: node-role.kubernetes.io/master
    operator: Exists
  - effect: NoExecute
    key: node.kubernetes.io/unreachable
    operator: Exists
    tolerationSeconds: 120
  - effect: NoExecute
    key: node.kubernetes.io/not-ready
    operator: Exists
    tolerationSeconds: 120
  - effect: NoSchedule
    key: node.cloudprovider.kubernetes.io/uninitialized
    operator: Exists
  - effect: NoSchedule
    key: node.kubernetes.io/not-ready
    operator: Exists

# Affinity rules - pod anti-affinity ensures replicas don't run on the same node
# The labelSelector will automatically use the correct selector labels (app.kubernetes.io/name and app.kubernetes.io/instance)
affinity:
  podAntiAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      - topologyKey: kubernetes.io/hostname

# Priority class for pod scheduling
priorityClassName: system-cluster-critical

# Use host network (required for cloud controller manager)
hostNetwork: true

# Logging verbosity (0-10, higher is more verbose)
verbosity: 2

# Additional command-line arguments
extraArgs: []

# Additional environment variables
extraEnv: []

# Additional volumes
extraVolumes: []

# Additional volume mounts
extraVolumeMounts: []

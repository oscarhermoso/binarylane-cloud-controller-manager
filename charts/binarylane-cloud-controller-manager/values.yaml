# Default values for binarylane-cloud-controller-manager.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 1

image:
  repository: ghcr.io/oscarhermoso/binarylane-cloud-controller-manager
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion.
  tag: ''

imagePullSecrets: []
nameOverride: ''
fullnameOverride: ''

# For testing purposes only - creates a dummy secret
createTestSecret: false

cloudControllerManager:
  # Name of secret containing BinaryLane API token
  # Create: kubectl create secret generic binarylane-api-token --from-literal=api-token="YOUR_TOKEN" -n kube-system
  secret:
    name: ''
    key: 'api-token'

serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Automatically mount a ServiceAccount's API credentials?
  automount: true
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ''

podAnnotations: {}
podLabels: {}

podSecurityContext:
  runAsNonRoot: true
  runAsUser: 65532
  fsGroup: 65532
  seccompProfile:
    type: RuntimeDefault

securityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL
  readOnlyRootFilesystem: true

resources:
  limits:
    cpu: 200m
    memory: 128Mi
  requests:
    cpu: 100m
    memory: 64Mi

# Node selector for pod assignment
nodeSelector:
  node-role.kubernetes.io/control-plane: ''

# Tolerations for pod assignment
tolerations:
  # Tolerate control-plane taint (Kubernetes 1.24+)
  - effect: NoSchedule
    key: node-role.kubernetes.io/control-plane
    operator: Exists
  # Tolerate master taint (legacy, pre-1.24)
  - effect: NoSchedule
    key: node-role.kubernetes.io/master
    operator: Exists
  - effect: NoExecute
    key: node.kubernetes.io/unreachable
    operator: Exists
    tolerationSeconds: 120
  - effect: NoExecute
    key: node.kubernetes.io/not-ready
    operator: Exists
    tolerationSeconds: 120
  - effect: NoSchedule
    key: node.cloudprovider.kubernetes.io/uninitialized
    operator: Exists
  - effect: NoSchedule
    key: node.kubernetes.io/not-ready
    operator: Exists

# Affinity for pod assignment
# Note: The labelSelector matchLabels will be set using the selectorLabels template
# in the deployment template to match app.kubernetes.io/name and app.kubernetes.io/instance
affinity:
  podAntiAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      - topologyKey: kubernetes.io/hostname

# Priority class name
priorityClassName: system-cluster-critical

# Host network - cloud controller manager needs to communicate with API server
hostNetwork: true

# Service configuration (not typically used for CCM)
service:
  enabled: false
  type: ClusterIP
  port: 10258

# Enable verbose logging
verbosity: 2

# Extra arguments to pass to the cloud controller manager
extraArgs: []

# Extra environment variables
extraEnv: []

# Extra volumes
extraVolumes: []

# Extra volume mounts
extraVolumeMounts: []
